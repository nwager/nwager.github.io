import{S as je,i as Ae,s as Ue,e as h,k as v,t as f,c as p,a as c,d as t,m as b,h as u,Q as ke,b as S,g as o,I as i,n as ue,x as Ve,y as ze,z as We,j as qe,p as He,q as Me,r as xe,C as Ce,o as Ge}from"../../chunks/index-b588d774.js";import{b as Fe}from"../../chunks/paths-396f020f.js";import{s as Oe}from"../../chunks/utils-8309f6d0.js";function Ne(_){let a,l,E,w,d,r,P,m,L,n,y,g,$,D,ee,z,k,te,q,V,se,M,W,oe,G,H,ae,O,x,re,N,I,ie,T,le,ne,Q,C,he,J,F,pe,K,B,ce,R,j,fe,X,A,U,de;return{c(){a=h("p"),l=h("img"),w=v(),d=h("p"),r=f("As a college student, it was customary to cover the apartment ceiling with tacky LED strips that detract from the otherwise-cozy home decor. Programming addressable LED strips is one of my favorite electronics activities, so I used an ESP8266 to control the LEDs using WiFi (in the name of convenience)."),P=v(),m=h("p"),L=f("The poorly-documented code can be found on "),n=h("a"),y=f("Github"),g=f("."),$=v(),D=h("h2"),ee=f("Hardware"),z=v(),k=h("p"),te=f("To make the controller compact, I designed a simple PCB to hold the ESP8266, buck converter, PSU terminals, and 3.3V-5V level shifter (hidden underneath the ESP)."),q=v(),V=h("p"),se=f("WS2811 strips require 12V, and my specific strip drew around 75W. I decided to use a 150W 12V power supply to have a sizeable power cushion, with room to extend the LED strip in the future. I also included a 1000uF smoothing capacitor for good measure."),M=v(),W=h("p"),oe=f("To power the ESP8266, I used a 5V buck converter board with header pins that slot into corresponding connectors on the PCB. The ESP operates at 3.3V while the WS2811s use 5V, so I pass the datalines through a 5V level shifter IC (SN74HCT245) and 330-ohm resistors for safety."),G=v(),H=h("h2"),ae=f("Software"),O=v(),x=h("p"),re=f("The ESP serves an HTML page stored in program memory. This page contains HTTP POSTs to send commands from the webpage to the ESP (i.e. color selection, on-off toggling, animation selection). Upon receiving these messages, the ESP updates the lights accordingly and sends back a response so the webpage is up-to-date."),N=v(),I=h("p"),ie=f("To control the LEDs, I used the popular library "),T=h("a"),le=f("FastLED"),ne=f(". It provides an API to change the LED HSV values and individually address each pixel."),Q=v(),C=h("h2"),he=f("What about the loose connector on the left?"),J=v(),F=h("p"),pe=f("For fun, I added support for a \u201Cclock\u201D that displays the current time in binary on a WS2812B strip. 12-hour time can be displayed in 10 bits: 4 for hours 0-11, and 6 for minutes 0-59. To separate the hours and minutes, a single LED between them toggles every second. In total, the WS2812B strip needs 11 pixels. Unfortunately, I wasn\u2019t able to create a housing for the clock that fits aesthetically, so I disconnected the feature."),K=v(),B=h("h2"),ce=f("Summary"),R=v(),j=h("p"),fe=f("This project was a fun exercise in simple web-based apps using an ESP8266, with pretty lights as visual feedback (my favorite kind of feedback!). The available controls are fairly basic, and much more interesting animations are possible with FastLED. However, on the rare occasions where the LEDs are turned on, the ability to finely control the color with a mobile device is good enough."),X=v(),A=h("p"),U=h("img"),this.h()},l(e){a=p(e,"P",{});var s=c(a);l=p(s,"IMG",{src:!0,alt:!0}),s.forEach(t),w=b(e),d=p(e,"P",{});var me=c(d);r=u(me,"As a college student, it was customary to cover the apartment ceiling with tacky LED strips that detract from the otherwise-cozy home decor. Programming addressable LED strips is one of my favorite electronics activities, so I used an ESP8266 to control the LEDs using WiFi (in the name of convenience)."),me.forEach(t),P=b(e),m=p(e,"P",{});var Y=c(m);L=u(Y,"The poorly-documented code can be found on "),n=p(Y,"A",{href:!0,rel:!0});var ve=c(n);y=u(ve,"Github"),ve.forEach(t),g=u(Y,"."),Y.forEach(t),$=b(e),D=p(e,"H2",{});var be=c(D);ee=u(be,"Hardware"),be.forEach(t),z=b(e),k=p(e,"P",{});var Ee=c(k);te=u(Ee,"To make the controller compact, I designed a simple PCB to hold the ESP8266, buck converter, PSU terminals, and 3.3V-5V level shifter (hidden underneath the ESP)."),Ee.forEach(t),q=b(e),V=p(e,"P",{});var _e=c(V);se=u(_e,"WS2811 strips require 12V, and my specific strip drew around 75W. I decided to use a 150W 12V power supply to have a sizeable power cushion, with room to extend the LED strip in the future. I also included a 1000uF smoothing capacitor for good measure."),_e.forEach(t),M=b(e),W=p(e,"P",{});var we=c(W);oe=u(we,"To power the ESP8266, I used a 5V buck converter board with header pins that slot into corresponding connectors on the PCB. The ESP operates at 3.3V while the WS2811s use 5V, so I pass the datalines through a 5V level shifter IC (SN74HCT245) and 330-ohm resistors for safety."),we.forEach(t),G=b(e),H=p(e,"H2",{});var ye=c(H);ae=u(ye,"Software"),ye.forEach(t),O=b(e),x=p(e,"P",{});var Pe=c(x);re=u(Pe,"The ESP serves an HTML page stored in program memory. This page contains HTTP POSTs to send commands from the webpage to the ESP (i.e. color selection, on-off toggling, animation selection). Upon receiving these messages, the ESP updates the lights accordingly and sends back a response so the webpage is up-to-date."),Pe.forEach(t),N=b(e),I=p(e,"P",{});var Z=c(I);ie=u(Z,"To control the LEDs, I used the popular library "),T=p(Z,"A",{href:!0,rel:!0});var ge=c(T);le=u(ge,"FastLED"),ge.forEach(t),ne=u(Z,". It provides an API to change the LED HSV values and individually address each pixel."),Z.forEach(t),Q=b(e),C=p(e,"H2",{});var Se=c(C);he=u(Se,"What about the loose connector on the left?"),Se.forEach(t),J=b(e),F=p(e,"P",{});var Ie=c(F);pe=u(Ie,"For fun, I added support for a \u201Cclock\u201D that displays the current time in binary on a WS2812B strip. 12-hour time can be displayed in 10 bits: 4 for hours 0-11, and 6 for minutes 0-59. To separate the hours and minutes, a single LED between them toggles every second. In total, the WS2812B strip needs 11 pixels. Unfortunately, I wasn\u2019t able to create a housing for the clock that fits aesthetically, so I disconnected the feature."),Ie.forEach(t),K=b(e),B=p(e,"H2",{});var Te=c(B);ce=u(Te,"Summary"),Te.forEach(t),R=b(e),j=p(e,"P",{});var Le=c(j);fe=u(Le,"This project was a fun exercise in simple web-based apps using an ESP8266, with pretty lights as visual feedback (my favorite kind of feedback!). The available controls are fairly basic, and much more interesting animations are possible with FastLED. However, on the rare occasions where the LEDs are turned on, the ability to finely control the color with a mobile device is good enough."),Le.forEach(t),X=b(e),A=p(e,"P",{});var De=c(A);U=p(De,"IMG",{src:!0,alt:!0}),De.forEach(t),this.h()},h(){ke(l.src,E=Fe+"/images/esp8266-leds/esp8266-both-1024.jpg")||S(l,"src",E),S(l,"alt","ESP8266 controller enclosure and circuit board"),S(n,"href","https://github.com/nwager/dorm-lights"),S(n,"rel","nofollow"),S(T,"href","https://fastled.io/"),S(T,"rel","nofollow"),ke(U.src,de=Fe+"/images/esp8266-leds/esp8266-leds-1024.jpg")||S(U,"src",de),S(U,"alt","LED strip turned on")},m(e,s){o(e,a,s),i(a,l),o(e,w,s),o(e,d,s),i(d,r),o(e,P,s),o(e,m,s),i(m,L),i(m,n),i(n,y),i(m,g),o(e,$,s),o(e,D,s),i(D,ee),o(e,z,s),o(e,k,s),i(k,te),o(e,q,s),o(e,V,s),i(V,se),o(e,M,s),o(e,W,s),i(W,oe),o(e,G,s),o(e,H,s),i(H,ae),o(e,O,s),o(e,x,s),i(x,re),o(e,N,s),o(e,I,s),i(I,ie),i(I,T),i(T,le),i(I,ne),o(e,Q,s),o(e,C,s),i(C,he),o(e,J,s),o(e,F,s),i(F,pe),o(e,K,s),o(e,B,s),i(B,ce),o(e,R,s),o(e,j,s),i(j,fe),o(e,X,s),o(e,A,s),i(A,U)},p:ue,i:ue,o:ue,d(e){e&&t(a),e&&t(w),e&&t(d),e&&t(P),e&&t(m),e&&t($),e&&t(D),e&&t(z),e&&t(k),e&&t(q),e&&t(V),e&&t(M),e&&t(W),e&&t(G),e&&t(H),e&&t(O),e&&t(x),e&&t(N),e&&t(I),e&&t(Q),e&&t(C),e&&t(J),e&&t(F),e&&t(K),e&&t(B),e&&t(R),e&&t(j),e&&t(X),e&&t(A)}}}const Qe={title:"ESP8266 WiFi LED Lighting",description:"A ceiling-mounted LED strip controlled by an ESP8266 web server.",author:"Noah Wager",date:"2021-06-22",published:!0};class Je extends je{constructor(a){super();Ae(this,a,null,Ne,Ue,{})}}var Ke=Object.freeze(Object.defineProperty({__proto__:null,default:Je,metadata:Qe},Symbol.toStringTag,{value:"Module"}));function Re(_){let a,l,E=_[1].title+"",w,d,r,P;var m=_[0];function L(n){return{}}return m&&(r=new m(L())),{c(){a=h("div"),l=h("h1"),w=f(E),d=v(),r&&Ve(r.$$.fragment),this.h()},l(n){a=p(n,"DIV",{class:!0});var y=c(a);l=p(y,"H1",{});var g=c(l);w=u(g,E),g.forEach(t),d=b(y),r&&ze(r.$$.fragment,y),y.forEach(t),this.h()},h(){S(a,"class","post-content svelte-1r9bln8")},m(n,y){o(n,a,y),i(a,l),i(l,w),i(a,d),r&&We(r,a,null),P=!0},p(n,[y]){if((!P||y&2)&&E!==(E=n[1].title+"")&&qe(w,E),m!==(m=n[0])){if(r){Ge();const g=r;He(g.$$.fragment,1,0,()=>{Ce(g,1)}),Me()}m?(r=new m(L()),Ve(r.$$.fragment),xe(r.$$.fragment,1),We(r,a,null)):r=null}},i(n){P||(r&&xe(r.$$.fragment,n),P=!0)},o(n){r&&He(r.$$.fragment,n),P=!1},d(n){n&&t(a),r&&Ce(r)}}}const Be={"../../lib/posts/esp8266-leds.svelte.md":Ke};let $e=[];for(let _ in Be){const a=Be[_],l=Oe(_);$e.push({post:a,slug:l})}function tt({params:_}){const{slug:a}=_,l=$e.find(E=>E.slug.toLowerCase()===a.toLowerCase()&&E.published!==!1);return l?{props:{page:l.post.default,metadata:l.post.metadata}}:{status:404,error:new Error("Post could not be found")}}function Xe(_,a,l){let{page:E}=a,{metadata:w}=a;return _.$$set=d=>{"page"in d&&l(0,E=d.page),"metadata"in d&&l(1,w=d.metadata)},[E,w]}class st extends je{constructor(a){super();Ae(this,a,Xe,Re,Ue,{page:0,metadata:1})}}export{st as default,tt as load};
